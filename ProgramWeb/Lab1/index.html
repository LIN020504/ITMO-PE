<!DOCTYPE html>
<html lang = "en">
    <head>
        <meta charset = "UTF-8">
        <title>Студент: Чжоу Хунсян P32131 Вариант: 1320</title>
        <link rel="stylesheet" type="text/css" href="Style.css">
    </head>

    <body>
        <script>
            function check() {
                let checkBox = document.getElementsByName("arrayX[]");
                let arrayX = [];
                let pinX = 0;

                for (let i=0; i<checkBox.length; i++) {
                    if (checkBox[i].checked) {
                        arrayX[pinX++] = checkBox[i].value;
                    }
                }
                if (pinX === 0) {
                    alert("You should input at least 1 value of X!");
                    return false;
                }

                let Y = document.getElementById("valueOfY").value;
                if (Y === "" || Y === null || isNaN(Y)) {
                    alert("Y can not be null");
                    return false;
                } else if (Y > 3 || Y < -3) {
                    alert("Value out of range!");
                    return false;
                }

                let R=-1;
                let checkR = false
                let radioR = document.getElementsByName("R");

                for (let i=0; i<radioR.length; i++) {
                    if (radioR[i].checked) {
                        R=radioR[i].value;
                        checkR = true;
                    }
                }

                if (checkR === false) {
                    alert("R can not be null!");
                    return false;
                }

                //alert(pinX);
                return true;
            }
            function send() {
                //let allRight = check();
                let form = document.getElementById("form1");
                let formData = new FormData(form);

                if(check()){
                    let request = new XMLHttpRequest();
                    let url = 'PHPScript.php';

                    request.open("POST",url,true);//asynchronous
                    //request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;")
                    request.send(formData);

                    request.onreadystatechange = function() {
                        if (request.readyState === 4  && request.status === 200) {
                            let origin = document.getElementById("result").innerHTML;
                            document.getElementById("result").innerHTML = origin + request.responseText;
                            //document.write(request.responseText);
                        }
                    }
                }
            }
        </script>

        <h1>
            Студент: Чжоу Хунсян P32131 <br> Вариант: 1320
        </h1>

        <h2>
            Lab 1
        </h2>

        <form id = "form1" method = "post">
            <div class = "InputX">
                <p>
                    Please choose value of X<span class = "required">*</span>:<br>
                    <input type="checkbox" value="-3" name="arrayX[]">-3
                    <input type="checkbox" value="-2" name="arrayX[]">-2
                    <input type="checkbox" value="-1" name="arrayX[]">-1
                    <input type="checkbox" value="0" name="arrayX[]">0
                    <input type="checkbox" value="1" name="arrayX[]">1
                    <input type="checkbox" value="2" name="arrayX[]">2
                    <input type="checkbox" value="3" name="arrayX[]">3
                    <input type="checkbox" value="4" name="arrayX[]">4
                    <input type="checkbox" value="5" name="arrayX[]">5
                </p>
            </div>

            <div class = "inputY">
                <p>Please input value of Y<span class = "required">*</span>:<br>
                <input type="text" placeholder="from -3 to 3" id="valueOfY" name = "Y"></p>
            </div>

            <div class = "InputR">
                <p>
                    Please choose value of R<span class = "required">*</span>:<br>
                    <input type="radio" value="1" name="R">1
                    <input type="radio" value="1.5" name="R">1.5
                    <input type="radio" value="2" name="R">2
                    <input type="radio" value="2.5" name="R">2.5
                    <input type="radio" value="3" name="R">3
                </p>
            </div>
            <!--
            <div class = "submit">
                <input type="submit" name="submit" onclick="return check()">
            </div>
            -->
        </form>

        <div class = "submit">
            <button type="button" id = "submit" onclick="send()"> submit</button>
        </div>

        <div class = "output">
            <p id="result">Result:</p>
        </div>

        <div class = "range">
            <img src="WX20221019-113638.png">
        </div>
    </body>
</html>